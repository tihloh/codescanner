<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barcode Scanner</title>
    <style>
        #interactive {
            width: 100%;
            max-width: 500px;
            margin: auto;
            display: block;
        }
        #controls {
            text-align: center;
            margin: 20px;
        }
    </style>
    <!-- Include QuaggaJS from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>
</head>
<body>
    <h1>Barcode Scanner</h1>
    <div id="interactive" class="viewport"></div>
    <div id="controls">
        <button id="start-button">Start Scanning</button>
        <button id="stop-button" disabled>Stop Scanning</button>
    </div>
    <p id="result">Scan a barcode to see the result here</p>

    <script>
        const startButton = document.getElementById('start-button');
        const stopButton = document.getElementById('stop-button');
        const resultElement = document.getElementById('result');

        const startScanner = () => {
            Quagga.init({
                inputStream: {
                    name: "Live",
                    type: "LiveStream",
                    target: document.querySelector('#interactive'), // Or '#yourElement' (optional)
                    constraints: {
                        facingMode: "environment" // Or 'user' for the front camera
                    },
                },
                decoder: {
                    readers: ["code_128_reader", "ean_reader", "ean_8_reader", "code_39_reader", "code_39_vin_reader", "codabar_reader", "upc_reader", "upc_e_reader", "i2of5_reader"] // Add other barcode formats if needed
                }
            }, (err) => {
                if (err) {
                    console.log(err);
                    return;
                }
                Quagga.start();
                startButton.disabled = true;
                stopButton.disabled = false;
            });

            Quagga.onDetected((data) => {
                resultElement.textContent = `Barcode detected: ${data.codeResult.code}`;
                stopScanner();
            });
        };

        const stopScanner = () => {
            Quagga.stop();
            startButton.disabled = false;
            stopButton.disabled = true;
        };

        startButton.addEventListener('click', startScanner);
        stopButton.addEventListener('click', stopScanner);
    </script>
</body>
</html>
